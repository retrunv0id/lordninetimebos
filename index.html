<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<title>Lord Nine Boss TWOKRATS-LORDNINE</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%); color: #f0f0f0; padding: 10px; padding-bottom: 80px; }
.header { text-align: center; background: rgba(0, 212, 255, 0.1); padding: 10px; border-radius: 6px; margin-bottom: 10px; }
.header img { width: 25px; margin-bottom: 4px; }
.header h1 { font-size: 0.85rem; color: #00d4ff; margin-bottom: 4px; }
.header p { font-size: 0.65rem; color: #00ff88; margin-bottom: 4px; }
.stats { display: flex; gap: 10px; justify-content: center; font-size: 0.7rem; }
.stats span { color: #a0a0b0; }
.stats strong { color: #00d4ff; }
.controls { display: flex; gap: 8px; margin-bottom: 10px; }
.btn-reset { flex: 1; padding: 8px; background: #444; border: none; color: white; border-radius: 4px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
.boss-list { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 10px; }
.boss-card { background: rgba(0, 212, 255, 0.05); border: 1px solid #00d4ff; border-radius: 4px; padding: 8px; display: flex; flex-direction: column; }

@media (max-width: 768px) {
  .boss-list { grid-template-columns: 1fr; gap: 8px; }
}

@media (max-width: 480px) {
  .boss-list { grid-template-columns: 1fr; gap: 6px; }
}
.boss-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
.boss-name { color: #00d4ff; font-weight: bold; font-size: 0.8rem; }
.boss-type { background: #ffd700; color: #000; padding: 2px 5px; border-radius: 3px; font-size: 0.55rem; font-weight: bold; }
.boss-info { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 6px; font-size: 0.7rem; }
.info-label { color: #00d4ff; font-weight: bold; font-size: 0.6rem; }
.info-value { color: #f0f0f0; word-break: break-word; }
.countdown { color: #00ff88; font-weight: bold; }
.countdown.soon { color: #ffa500; }
.countdown.active { color: #ffd700; }
.actions { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; }
.btn-small { padding: 5px; background: #00d4ff; border: none; color: white; border-radius: 3px; cursor: pointer; font-size: 0.65rem; font-weight: bold; }
.btn-small.danger { background: #ff3366; grid-column: 1 / -1; }
.time-input { grid-column: 1 / -1; padding: 3px; background: #0a0a0f; border: 1px solid #00d4ff; color: #f0f0f0; border-radius: 3px; font-size: 0.65rem; }
footer { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(26, 26, 46, 0.95); padding: 6px; text-align: center; font-size: 0.6rem; color: #a0a0b0; }
.eth { font-family: monospace; color: #00d4ff; font-size: 0.55rem; }
</style>
</head>
<body>

<div class="header">
  <img src="https://static-pubcomm.onstove.com/live/l9_asia/brand/images/promotion/common/aside/log_en.png" alt="Logo">
  <h1>‚öîÔ∏è BOSS TRACKER ‚öîÔ∏è</h1>
  <hi>‚öîÔ∏è TWOKRATS-LORDNINE ‚öîÔ∏è</hi>
  <p>üåç Asia/Jakarta UTC+7</p>
  <div class="stats">
    <div><span>Total:</span> <strong id="total">0</strong></div>
    <div><span>Active:</span> <strong id="active" style="color: #ff3366;">0</strong></div>
    <div><span>Soon:</span> <strong id="soon" style="color: #ffa500;">0</strong></div>
  </div>
</div>

<div class="controls">
  <button class="btn-reset" onclick="doResetAll()">üîÑ Reset All</button>
</div>

<div class="boss-list" id="list"></div>

<audio id="audio" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

<footer>
  <span class="eth">TWOKRATS-LORDNINE</span>
</footer>

<script>
const TZ = 'Asia/Jakarta';
const bosses = {
  "Ratan": {type: "scheduled", loc: "Ancient Ruins", sched: [{day: "daily", times: ["10:00", "11:00", "19:00", "20:00"]}]},
  "Parto": {type: "scheduled", loc: "Ancient Ruins", sched: [{day: "daily", times: ["10:00", "11:00", "19:00", "20:00"]}]},
  "Nedra": {type: "scheduled", loc: "Ancient Ruins", sched: [{day: "daily", times: ["10:00", "11:00", "19:00", "20:00"]}]},
  "Benji": {type: "scheduled", loc: "Nest of Vengeance", sched: [{day: "sunday", times: ["20:00"]}]},
  "Chailock": {type: "scheduled", loc: "Kallion's Tomb", sched: [{day: "saturday", times: ["21:00"]}]},
  "Auraq": {type: "scheduled", loc: "Garbana Underground Waterway 2F", sched: [{day: "friday", times: ["21:00"]}, {day: "wednesday", times: ["20:00"]}]},
  "Saphirus": {type: "scheduled", loc: "Moonlight Shackle", sched: [{day: "sunday", times: ["16:00"]}, {day: "tuesday", times: ["10:30"]}]},
  "Neutro": {type: "scheduled", loc: "Battlefield of Love and Hatred", sched: [{day: "tuesday", times: ["18:00"]}, {day: "thursday", times: ["10:30"]}]},
  "Clemantis": {type: "scheduled", loc: "White Witch's Cradle", sched: [{day: "monday", times: ["10:30"]}, {day: "thursday", times: ["18:00"]}]},
  "Thymele": {type: "scheduled", loc: "Mark of Rampage", sched: [{day: "monday", times: ["18:00"]}, {day: "wednesday", times: ["10:30"]}]},
  "Milavy": {type: "scheduled", loc: "Lower Tomb of Tyriosa 3F", sched: [{day: "saturday", times: ["14:00"]}]},
  "Ringor": {type: "scheduled", loc: "Torchlight Highway", sched: [{day: "saturday", times: ["16:00"]}]},
  "Roderick": {type: "scheduled", loc: "Garbana Underground Waterway 1F", sched: [{day: "friday", times: ["18:00"]}]},
  "Amentis": {type: "respawn", hrs: 29, loc: "Land of Glory"},
  "Araneo": {type: "respawn", hrs: 24, loc: "Tyriosa 1F"},
  "Asta": {type: "respawn", hrs: 62, loc: "Silvergrass Field"},
  "Baron": {type: "respawn", hrs: 32, loc: "Battlefield of Templar"},
  "Catena": {type: "respawn", hrs: 35, loc: "Deadman 3F"},
  "Duplican": {type: "respawn", hrs: 48, loc: "Plateau of Revolution"},
  "Ego": {type: "respawn", hrs: 21, loc: "Ulan Canyon"},
  "Gareth": {type: "respawn", hrs: 32, loc: "Deadman 1F"},
  "General": {type: "respawn", hrs: 29, loc: "Tyriosa 2F"},
  "Lady": {type: "respawn", hrs: 18, loc: "Twilight Hill"},
  "Larba": {type: "respawn", hrs: 35, loc: "Ruins of the War"},
  "Livera": {type: "respawn", hrs: 24, loc: "Protector's Ruins"},
  "Metus": {type: "respawn", hrs: 48, loc: "Plateau of Revolution"},
  "Ordo": {type: "respawn", hrs: 62, loc: "Silvergrass Field"},
  "Secreta": {type: "respawn", hrs: 62, loc: "Silvergrass Field"},
  "Shuliar": {type: "respawn", hrs: 35, loc: "Ruins of the War"},
  "Supore": {type: "respawn", hrs: 62, loc: "Silvergrass Field"},
  "Titore": {type: "respawn", hrs: 37, loc: "Deadman 2F"},
  "Undomiel": {type: "respawn", hrs: 24, loc: "Secret Lab"},
  "Venatus": {type: "respawn", hrs: 10, loc: "Corrupted Basin"},
  "Viorent": {type: "respawn", hrs: 10, loc: "Crescent Lake"},
  "Wannitas": {type: "respawn", hrs: 48, loc: "Plateau of Revolution"}
};

let tracked = {};
let notified = {};

function now() { return new Date(new Date().toLocaleString('en-US', {timeZone: TZ})); }

function fmtTime(d) {
  const h = d.getHours();
  let p = '';
  if (h >= 5 && h < 11) p = 'üåÖ Pagi';
  else if (h >= 11 && h < 15) p = '‚òÄÔ∏è Siang';
  else if (h >= 15 && h < 18) p = 'üå§Ô∏è Sore';
  else if (h >= 18 && h < 21) p = 'üåÜ Petang';
  else p = 'üåô Malam';
  const t = d.toLocaleString('en-US', {timeZone: TZ, month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false});
  return `${t} ${p}`;
}

function fmtCount(ms) {
  const s = Math.floor(ms / 1000);
  const h = Math.floor(s / 3600);
  const m = Math.floor((s % 3600) / 60);
  const sec = s % 60;
  return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
}

function nextSpawn(b) {
  const n = now();
  const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
  let spawns = [];
  for (let s of b.sched) {
    for (let t of s.times) {
      let sp = new Date(n);
      const [h, m] = t.split(':').map(Number);
      if (s.day === 'daily') {
        sp.setHours(h, m, 0, 0);
        if (sp <= n) sp.setDate(sp.getDate() + 1);
      } else {
        const day = days.indexOf(s.day);
        let diff = day - sp.getDay();
        if (diff <= 0) diff += 7;
        sp.setDate(sp.getDate() + diff);
        sp.setHours(h, m, 0, 0);
      }
      spawns.push(sp);
    }
  }
  return spawns.sort((a, b) => a - b)[0];
}

function updateCountdown() {
  const n = now();
  const cards = document.querySelectorAll('.boss-card');
  cards.forEach(card => {
    const nameEl = card.querySelector('.boss-name');
    if (!nameEl) return;
    const name = nameEl.textContent;
    const b = bosses[name];
    if (!b) return;
    
    let cd = null;
    if (b.type === 'scheduled') {
      const next = nextSpawn(b);
      cd = next ? next - n : null;
    } else if (tracked[name]) {
      cd = tracked[name] - n;
    }
    
    const countEl = card.querySelector('.countdown');
    if (!countEl) return;
    
    let st = '', cls = '';
    if (cd !== null) {
      if (cd < 0 && cd > -3600000) {
        st = 'üî• ACTIVE NOW!';
        cls = 'active';
      } else if (cd > 0 && cd <= 600000) {
        st = fmtCount(cd);
        cls = 'soon';
        if (!notified[name]) {
          notified[name] = true;
          document.getElementById('audio').play().catch(() => {});
          if (Notification.permission === 'granted') {
            new Notification(`‚ö†Ô∏è ${name}`, {body: `${b.loc}\n‚è∞ Soon!`, requireInteraction: true});
          }
        }
      } else if (cd > 0) {
        st = fmtCount(cd);
      } else {
        st = 'SPAWNED!';
      }
    } else {
      st = 'Not tracked';
    }
    
    countEl.textContent = st;
    countEl.className = 'countdown ' + cls;
  });
}

function render() {
  const n = now();
  let list = [];
  for (let name in bosses) {
    let b = {...bosses[name]};
    b.name = name;
    if (b.type === 'scheduled') {
      b.next = nextSpawn(b);
    } else if (tracked[name]) {
      b.next = tracked[name];
    }
    list.push(b);
  }
  list.sort((a, b) => {
    const at = a.next ? a.next - n : Infinity;
    const bt = b.next ? b.next - n : Infinity;
    return at - bt;
  });
  
  let html = '';
  let act = 0, s = 0;
  for (let b of list) {
    const cd = b.next ? b.next - n : null;
    let info = '';
    if (b.type === 'scheduled') {
      info = b.sched.map(x => {
        const d = x.day === 'daily' ? 'Daily' : x.day.charAt(0).toUpperCase() + x.day.slice(1);
        return `${d}: ${x.times.join(', ')}`;
      }).join('<br>');
    } else {
      info = `Respawn: ${b.hrs}h`;
    }
    
    let st = 'Not tracked', cls = '';
    if (cd !== null) {
      if (cd < 0 && cd > -3600000) {
        st = 'üî• ACTIVE NOW!';
        cls = 'active';
        act++;
      } else if (cd > 0 && cd <= 600000) {
        st = fmtCount(cd);
        cls = 'soon';
        s++;
      } else if (cd > 0) {
        st = fmtCount(cd);
      } else {
        st = 'SPAWNED!';
      }
    }
    
    let acts = '';
    if (b.type === 'respawn') {
      acts = `<button class="btn-small" onclick="killed('${b.name}')">Killed</button><button class="btn-small" onclick="setTime('${b.name}')">Set</button><input type="time" class="time-input" id="inp-${b.name}"><button class="btn-small danger" onclick="reset('${b.name}')">Reset</button>`;
    } else {
      acts = '<button class="btn-small" style="grid-column: 1/-1; background: #ffd700; color: #000;">‚≠ê Auto</button>';
    }
    
    html += `<div class="boss-card"><div class="boss-header"><div class="boss-name">${b.name}</div><div class="boss-type">${b.type === 'scheduled' ? 'AUTO' : 'MANUAL'}</div></div><div class="boss-info"><div><div class="info-label">Location</div><div class="info-value">${b.loc}</div></div><div><div class="info-label">Info</div><div class="info-value">${info}</div></div><div><div class="info-label">Spawn</div><div class="info-value">${b.next ? fmtTime(b.next) : '-'}</div></div><div><div class="info-label">Count</div><div class="countdown ${cls}">${st}</div></div></div><div class="actions">${acts}</div></div>`;
  }
  
  document.getElementById('list').innerHTML = html;
  document.getElementById('total').textContent = Object.keys(bosses).length;
  document.getElementById('active').textContent = act;
  document.getElementById('soon').textContent = s;
}

function killed(name) {
  const t = now();
  tracked[name] = new Date(t.getTime() + bosses[name].hrs * 3600000);
  notified[name] = false;
  render();
}

function setTime(name) {
  const inp = document.getElementById(`inp-${name}`);
  if (!inp || !inp.value) {
    alert('Enter time');
    return;
  }
  const t = now();
  const [h, m] = inp.value.split(':').map(Number);
  let k = new Date(t);
  k.setHours(h, m, 0, 0);
  if (k > t) k.setDate(k.getDate() - 1);
  tracked[name] = new Date(k.getTime() + bosses[name].hrs * 3600000);
  notified[name] = false;
  inp.value = '';
  render();
}

function reset(name) {
  delete tracked[name];
  notified[name] = false;
  const inp = document.getElementById(`inp-${name}`);
  if (inp) inp.value = '';
  render();
}

function doResetAll() {
  if (confirm('Reset all?')) {
    tracked = {};
    notified = {};
    document.querySelectorAll('.time-input').forEach(el => el.value = '');
    render();
  }
}

if (Notification.permission !== 'granted') Notification.requestPermission();

setInterval(updateCountdown, 1000);
render();
</script>

</body>
</html>
